<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ ì¢Œì„ ë°°ì¹˜ ì¶”ì²¨ê¸°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 5. í™”ë©´ì„ ê½‰ ì±„ìš°ëŠ” êµ¬ì„± & 8. ëª¨ë“  ìš”ì†Œë¥¼ í•œ í™”ë©´ ì•ˆì— (ìŠ¤í¬ë¡¤ ë°©ì§€) */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            height: 100vh; /* ë·°í¬íŠ¸ ë†’ì´ ê½‰ ì±„ìš°ê¸° */
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ë°©ì§€ */
            background-color: #f0f4f8; /* ë°°ê²½ìƒ‰ ë³€ê²½ */
        }

        .container {
            width: 95%;
            height: 95vh; /* í™”ë©´ì˜ 95% ë†’ì´ ì‚¬ìš© */
            max-width: 1400px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box; 
        }
        
        h1 {
            color: #1a1a1a;
            margin-bottom: 5px;
            font-size: 2em;
            font-weight: 700;
        }

        /* 3. êµíƒ ì˜ì—­ */
        .front-area {
            text-align: center;
            margin: 5px 0 15px; /* ê°„ê²© ì¡°ì • */
        }

        .podium-icon {
            font-size: 2.2em;
            color: #795548;
        }
        
        .podium-text {
            font-weight: bold;
            color: #555;
            font-size: 0.8em;
        }

        /* êµì‹¤ ë ˆì´ì•„ì›ƒ (3ê°œ êµ°ë‹¨ ë°°ì¹˜) */
        .class-layout {
            display: flex;
            justify-content: center;
            gap: 15px; /* êµ°ë‹¨ ê°„ê²© */
            width: 100%;
            flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ì¢Œì„ ë°°ì¹˜ê°€ ì°¨ì§€ */
            min-height: 0;
        }

        /* êµ°ë‹¨ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .seat-cluster {
            display: grid;
            gap: 6px; /* ì¢Œì„ ê°„ê²© */
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            /* flex-growë¥¼ ì‚¬ìš©í•˜ì—¬ êµ°ë‹¨ ê°„ ë¹„ìœ¨ ì¡°ì • */
            flex-grow: 1; 
            min-width: 0;
        }
        
        /* 1. êµ°ë‹¨ë³„ ê·¸ë¦¬ë“œ ì„¤ì • */
        /* 1ëª¨ë‘ : ì™¼ìª½ êµ°ë‹¨ (2ì—´ 5í–‰) */
        .left-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(5, 1fr);
            background-color: #e3f2fd; /* 9. ì—°í•œ íŒŒë€ìƒ‰ */
        }

        /* 2ëª¨ë‘ : ì¤‘ì•™ êµ°ë‹¨ (2ì—´ 4í–‰) */
        .center-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            background-color: #fce4ec; /* 9. ì—°í•œ ë¶„í™ìƒ‰ */
        }

        /* 3ëª¨ë‘ : ì˜¤ë¥¸ìª½ êµ°ë‹¨ (2ì—´ 4í–‰) */
        .right-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            background-color: #e8f5e9; /* 9. ì—°í•œ ë…¹ìƒ‰ */
        }
        
        /* 6. ì¹¸ì€ ê¼­ ì •ì‚¬ê°í˜•ì´ ì•„ë‹ˆì–´ë„ ë¨ (ë†’ì´ë¥¼ ìœ ì—°í•˜ê²Œ) */
        .seat {
            width: 100%;
            height: 100%; /* ê·¸ë¦¬ë“œ ì…€ ë†’ì´ ê½‰ ì±„ìš°ê¸° */
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.4s ease-in-out;
        }

        /* ëª¨ë‘ ë³„ ì¢Œì„ ê¸°ë³¸ ìƒ‰ìƒ */
        #left-cluster .seat { background-color: #2196F3; }
        #center-cluster .seat { background-color: #E91E63; }
        #right-cluster .seat { background-color: #4CAF50; }
        
        /* ì¶”ì²¨ ì¤‘ ì„ì‹œ ìƒ‰ìƒ */
        .seat.drawing { 
            background-color: #FFC107 !important; 
            color: #333; 
            transform: scale(1.05);
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #drawButton {
            padding: 12px 30px;
            font-size: 1.2em;
            cursor: pointer;
            background-color: #673AB7; 
            color: white;
            border: none;
            border-radius: 8px;
            margin-top: 15px;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 4px 8px rgba(103, 58, 183, 0.4);
            font-weight: bold;
        }
        
        #drawButton:hover {
            background-color: #512DA8;
        }
        
        #drawButton:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* ë¯¸ë””ì–´ ì¿¼ë¦¬: ëª¨ë°”ì¼ ìµœì í™” (ê°€ë¡œí­ ì¢ì„ ë•Œ) */
        @media (max-width: 768px) {
            .container {
                height: 100vh;
                padding: 10px;
            }
            h1 { font-size: 1.3em; }
            .class-layout {
                flex-direction: column;
                gap: 10px;
                overflow-y: auto; /* ëª¨ë°”ì¼ì—ì„œ ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ìŠ¤í¬ë¡¤ í—ˆìš© */
            }
            .seat-cluster {
                width: 95%;
                gap: 4px;
                /* ëª¨ë°”ì¼ì—ì„œ 3êµ°ë‹¨ì„ ì„¸ë¡œë¡œ ë°°ì¹˜í•˜ê³ , ì¢Œì„ ìì²´ëŠ” 4ì—´ë¡œ ì¡°ì •í•˜ì—¬ ê³µê°„ í™œìš© */
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: auto;
            }
            .seat { font-size: 1em; }
            #drawButton { margin-top: 10px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ëœë¤ ì¢Œì„ ë°°ì¹˜ ì¶”ì²¨ê¸° ğŸ²</h1>
        
        <div class="front-area">
            <i class="fas fa-chalkboard-teacher podium-icon"></i>
            <div class="podium-text">êµíƒ</div>
        </div>

        <div class="class-layout">
            <div class="seat-cluster left-cluster" id="left-cluster"></div>

            <div class="seat-cluster center-cluster" id="center-cluster"></div>

            <div class="seat-cluster right-cluster" id="right-cluster"></div>
        </div>

        <button id="drawButton">âœ¨ ì¶”ì²¨ ì‹œì‘ (26ëª…)</button>
    </div>
    
    <audio id="drumrollSound" src="[YOUR_DRUMROLL_SOUND_URL]" preload="auto"></audio>

    <script>
        // 1. ì¢Œì„ êµ¬ì„± ì •ì˜
        const totalSeats = 26;
        const clusterSpecs = [
            { id: 'left-cluster', count: 10, defaultColor: '#2196F3' }, 
            { id: 'center-cluster', count: 8, defaultColor: '#E91E63' }, 
            { id: 'right-cluster', count: 8, defaultColor: '#4CAF50' }  
        ];
        
        // 2. ë²ˆí˜¸ ë²”ìœ„ ì •ì˜ (1~16, 18, 19~28) -> 26ê°œ ë²ˆí˜¸
        const allPossibleNumbers = Array.from({length: 28}, (_, i) => i + 1);
        // ì œì™¸í•  ë²ˆí˜¸ëŠ” 17ë²ˆ
        const availableNumbers = allPossibleNumbers.filter(n => n !== 17);

        // DOM ìš”ì†Œ ìºì‹œ
        const drawButton = document.getElementById('drawButton');
        const soundElement = document.getElementById('drumrollSound');

        // ì¢Œì„ div ìƒì„± í•¨ìˆ˜
        function createSeatElements() {
            clusterSpecs.forEach(spec => {
                const clusterEl = document.getElementById(spec.id);
                clusterEl.innerHTML = ''; 
                for (let i = 0; i < spec.count; i++) {
                    const seat = document.createElement('div');
                    seat.className = 'seat';
                    // ì´ˆê¸°ì—ëŠ” ì¢Œì„ ë²ˆí˜¸ ëŒ€ì‹  'ìë¦¬'ë¡œ í‘œì‹œ
                    seat.textContent = 'ìë¦¬'; 
                    seat.style.backgroundColor = spec.defaultColor; 
                    clusterEl.appendChild(seat);
                }
            });
        }
        
        // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // 2. ì¶”ì²¨ ë° ë°°ì¹˜ í•¨ìˆ˜
        function drawSeats() {
            if (drawButton.disabled) return;
            
            drawButton.disabled = true;
            drawButton.textContent = 'ğŸ¶ ì¶”ì²¨ ì¤‘...';

            // 7. ì‚¬ìš´ë“œ ì¬ìƒ ì‹œë„
            if (soundElement) {
                // ì‚¬ìš´ë“œê°€ ì§§ê²Œ ë°˜ë³µë˜ë„ë¡ ì„¤ì •
                soundElement.currentTime = 0; 
                soundElement.play().catch(e => console.log("ì‚¬ìš´ë“œ ìë™ ì¬ìƒ ì‹¤íŒ¨ (ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í•„ìš”):", e));
            }
            
            // ë²ˆí˜¸ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ê¸°
            const shuffledNumbers = [...availableNumbers];
            shuffleArray(shuffledNumbers);
            
            const allSeatElements = document.querySelectorAll('.seat');
            
            // ì¶”ì²¨ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì‹œì‘
            allSeatElements.forEach(seat => seat.classList.add('drawing'));

            // 3ì´ˆ í›„ ì¶”ì²¨ ê²°ê³¼ë¥¼ í‘œì‹œ
            setTimeout(() => {
                if (soundElement) soundElement.pause();
                
                allSeatElements.forEach((seat, index) => {
                    seat.classList.remove('drawing');
                    if (index < totalSeats) {
                        // ì¤‘ë³µ ì—†ëŠ” ë²ˆí˜¸ ë°°ì¹˜
                        seat.textContent = shuffledNumbers[index];
                    }
                    // ì›ë˜ ìƒ‰ìƒìœ¼ë¡œ ë³µê·€
                    const clusterId = seat.parentElement.id;
                    const spec = clusterSpecs.find(s => s.id === clusterId);
                    seat.style.backgroundColor = spec.defaultColor; 
                });
                
                drawButton.disabled = false;
                drawButton.textContent = 'ğŸ” ë‹¤ì‹œ ì¶”ì²¨í•˜ê¸°';
            }, 3000); // 3ì´ˆ ëŒ€ê¸° (ì‚¬ìš´ë“œ ì¬ìƒ ì‹œê°„ ê³ ë ¤)
        }

        // ì´ˆê¸° ì¢Œì„ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        createSeatElements();
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        drawButton.addEventListener('click', drawSeats);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°”ë¡œ ì¶”ì²¨ ì‹¤í–‰
        window.onload = drawSeats;

    </script>
</body>
</html>
